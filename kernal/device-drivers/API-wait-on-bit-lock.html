<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>wait_on_bit_lock</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Linux Device Drivers" /><link rel="up" href="ch01s04.html" title="Wait queues and Wake events" /><link rel="prev" href="API-wait-on-bit.html" title="wait_on_bit" /><link rel="next" href="API-finish-wait.html" title="finish_wait" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">wait_on_bit_lock</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-wait-on-bit.html">Prev</a> </td><th width="60%" align="center">Wait queues and Wake events</th><td width="20%" align="right"> <a accesskey="n" href="API-finish-wait.html">Next</a></td></tr></table><hr /></div><div class="refentry"><a id="API-wait-on-bit-lock"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>wait_on_bit_lock — 
     wait for a bit to be cleared, when wanting to set it
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <strong class="fsfunc">wait_on_bit_lock </strong>(</code></td><td>void * <var class="pdparam">word</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">bit</var>, </td></tr><tr><td> </td><td>int (*<var class="pdparam">action</var>)
     <code>(</code>void *<code>)</code>, </td></tr><tr><td> </td><td>unsigned <var class="pdparam">mode</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a id="idp24795972"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>word</code></em></span></dt><dd><p>
     the word being waited on, a kernel virtual address
    </p></dd><dt><span class="term"><em class="parameter"><code>bit</code></em></span></dt><dd><p>
     the bit of the word being waited on
    </p></dd><dt><span class="term"><em class="parameter"><code>action</code></em></span></dt><dd><p>
     the function used to sleep, which may take special actions
    </p></dd><dt><span class="term"><em class="parameter"><code>mode</code></em></span></dt><dd><p>
     the task state to sleep in
    </p></dd></dl></div></div><div class="refsect1"><a id="idp24800612"></a><h2>Description</h2><p>
   There is a standard hashed waitqueue table for generic use. This
   is the part of the hashtable's accessor API that waits on a bit
   when one intends to set it, for instance, trying to lock bitflags.
   For instance, if one were to have waiters trying to set bitflag
   and waiting for it to clear before setting it, one would call
   <code class="function">wait_on_bit</code> in threads waiting to be able to set the bit.
   One uses <code class="function">wait_on_bit_lock</code> where one is waiting for the bit to
   clear with the intention of setting it, and when done, clearing it.
</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-wait-on-bit.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch01s04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-finish-wait.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">wait_on_bit</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">finish_wait</span></td></tr></table></div></body></html>