<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>blk_insert_request</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="The Linux Kernel API" /><link rel="up" href="blkdev.html" title="Chapter 14. Block Devices" /><link rel="prev" href="API-blk-requeue-request.html" title="blk_requeue_request" /><link rel="next" href="API-part-round-stats.html" title="part_round_stats" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center"><span class="phrase">blk_insert_request</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="API-blk-requeue-request.html">Prev</a> </td><th width="60%" align="center">Chapter 14. Block Devices</th><td width="20%" align="right"> <a accesskey="n" href="API-part-round-stats.html">Next</a></td></tr></table><hr /></div><div class="refentry"><a id="API-blk-insert-request"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>blk_insert_request — 
     insert a special request into a request queue
 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">void <strong class="fsfunc">blk_insert_request </strong>(</code></td><td>struct request_queue * <var class="pdparam">q</var>, </td></tr><tr><td> </td><td>struct request * <var class="pdparam">rq</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">at_head</var>, </td></tr><tr><td> </td><td>void * <var class="pdparam">data</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a id="idp43814780"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>q</code></em></span></dt><dd><p>
     request queue where request should be inserted
    </p></dd><dt><span class="term"><em class="parameter"><code>rq</code></em></span></dt><dd><p>
     request to be inserted
    </p></dd><dt><span class="term"><em class="parameter"><code>at_head</code></em></span></dt><dd><p>
     insert request at head or tail of queue
    </p></dd><dt><span class="term"><em class="parameter"><code>data</code></em></span></dt><dd><p>
     private data
    </p></dd></dl></div></div><div class="refsect1"><a id="idp43819468"></a><h2>Description</h2><p>
   Many block devices need to execute commands asynchronously, so they don't
   block the whole kernel from preemption during request execution.  This is
   accomplished normally by inserting aritficial requests tagged as
   REQ_TYPE_SPECIAL in to the corresponding request queue, and letting them
   be scheduled for actual execution by the request queue.
   </p><p>

   We have the option of inserting the head or the tail of the queue.
   Typically we use the tail for new ioctls and so forth.  We use the head
   of the queue for things like a QUEUE_FULL message from a device, or a
   host that is unable to accept a particular command.
</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="API-blk-requeue-request.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="blkdev.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="API-part-round-stats.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="phrase">blk_requeue_request</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="phrase">part_round_stats</span></td></tr></table></div></body></html>