<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ioctl VIDIOC_G_AUDIO, VIDIOC_S_AUDIO</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="LINUX MEDIA INFRASTRUCTURE API" /><link rel="up" href="user-func.html" title="Appendix A. Function Reference" /><link rel="prev" href="vidioc-enumstd.html" title="ioctl VIDIOC_ENUMSTD" /><link rel="next" href="vidioc-g-audioout.html" title="ioctl VIDIOC_G_AUDOUT, VIDIOC_S_AUDOUT" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ioctl VIDIOC_G_AUDIO, VIDIOC_S_AUDIO</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="vidioc-enumstd.html">Prev</a> </td><th width="60%" align="center">Appendix A. Function Reference</th><td width="20%" align="right"> <a accesskey="n" href="vidioc-g-audioout.html">Next</a></td></tr></table><hr /></div><div class="refentry"><a id="vidioc-g-audio"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VIDIOC_G_AUDIO, VIDIOC_S_AUDIO — Query or select the current audio input and its
attributes</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <strong class="fsfunc">ioctl</strong>(</code></td><td>int <var class="pdparam">fd</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">request</var>, </td></tr><tr><td> </td><td>struct v4l2_audio *<var class="pdparam">argp</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <strong class="fsfunc">ioctl</strong>(</code></td><td>int <var class="pdparam">fd</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">request</var>, </td></tr><tr><td> </td><td>const struct v4l2_audio *<var class="pdparam">argp</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a id="idp54121660"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>fd</code></em></span></dt><dd><p>File descriptor returned by <a class="link" href="func-open.html" title="V4L2 open()"><code class="function">open()</code></a>.</p></dd><dt><span class="term"><em class="parameter"><code>request</code></em></span></dt><dd><p>VIDIOC_G_AUDIO, VIDIOC_S_AUDIO</p></dd><dt><span class="term"><em class="parameter"><code>argp</code></em></span></dt><dd><p></p></dd></dl></div></div><div class="refsect1"><a id="idp54125724"></a><h2>Description</h2><p>To query the current audio input applications zero out the
<em class="structfield"><code>reserved</code></em> array of a struct <a class="link" href="vidioc-g-audio.html#v4l2-audio" title="Table A.36. struct v4l2_audio">v4l2_audio</a>
and call the <code class="constant">VIDIOC_G_AUDIO</code> ioctl with a pointer
to this structure. Drivers fill the rest of the structure or return an
<span class="errorcode">EINVAL</span> error code when the device has no audio inputs, or none which combine
with the current video input.</p><p>Audio inputs have one writable property, the audio mode. To
select the current audio input <span class="emphasis"><em>and</em></span> change the
audio mode, applications initialize the
<em class="structfield"><code>index</code></em> and <em class="structfield"><code>mode</code></em>
fields, and the
<em class="structfield"><code>reserved</code></em> array of a
<span class="structname">v4l2_audio</span> structure and call the
<code class="constant">VIDIOC_S_AUDIO</code> ioctl. Drivers may switch to a
different audio mode if the request cannot be satisfied. However, this
is a write-only ioctl, it does not return the actual new audio
mode.</p><div class="table"><a id="v4l2-audio"></a><p class="title"><strong>Table A.36. struct <span class="structname">v4l2_audio</span></strong></p><div class="table-contents"><table summary="struct v4l2_audio" width="100%" border="0"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /></colgroup><tbody valign="top"><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>index</code></em></td><td valign="top">Identifies the audio input, set by the
driver or application.</td></tr><tr><td valign="top">__u8</td><td valign="top"><em class="structfield"><code>name</code></em>[32]</td><td valign="top">Name of the audio input, a NUL-terminated ASCII
string, for example: "Line In". This information is intended for the
user, preferably the connector label on the device itself.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>capability</code></em></td><td valign="top">Audio capability flags, see <a class="xref" href="vidioc-g-audio.html#audio-capability" title="Table A.37. Audio Capability Flags">Table A.37, “Audio Capability Flags”</a>.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>mode</code></em></td><td valign="top">Audio mode flags set by drivers and applications (on
	    <code class="constant">VIDIOC_S_AUDIO</code> ioctl), see <a class="xref" href="vidioc-g-audio.html#audio-mode" title="Table A.38. Audio Mode Flags">Table A.38, “Audio Mode Flags”</a>.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>reserved</code></em>[2]</td><td valign="top">Reserved for future extensions. Drivers and
applications must set the array to zero.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="audio-capability"></a><p class="title"><strong>Table A.37. Audio Capability Flags</strong></p><div class="table-contents"><table summary="Audio Capability Flags" width="100%" border="0"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_AUDCAP_STEREO</code></td><td valign="top">0x00001</td><td valign="top">This is a stereo input. The flag is intended to
automatically disable stereo recording etc. when the signal is always
monaural. The API provides no means to detect if stereo is
<span class="emphasis"><em>received</em></span>, unless the audio input belongs to a
tuner.</td></tr><tr><td valign="top"><code class="constant">V4L2_AUDCAP_AVL</code></td><td valign="top">0x00002</td><td valign="top">Automatic Volume Level mode is supported.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="audio-mode"></a><p class="title"><strong>Table A.38. Audio Mode Flags</strong></p><div class="table-contents"><table summary="Audio Mode Flags" width="100%" border="0"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_AUDMODE_AVL</code></td><td valign="top">0x00001</td><td valign="top">AVL mode is on.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="refsect1"><a id="idp54147996"></a><h2>Return Value</h2><p>On success <span class="returnvalue">0</span> is returned, on error <span class="returnvalue">-1</span> and the <code class="varname">errno</code> variable is set appropriately:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="errorcode">EINVAL</span></span></dt><dd><p>No audio inputs combine with the current video input,
or the number of the selected audio input is out of bounds or it does
not combine, or there are no audio inputs at all and the ioctl is not
supported.</p></dd><dt><span class="term"><span class="errorcode">EBUSY</span></span></dt><dd><p>I/O is in progress, the input cannot be
switched.</p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="vidioc-enumstd.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="user-func.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="vidioc-g-audioout.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ioctl VIDIOC_ENUMSTD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> ioctl VIDIOC_G_AUDOUT, VIDIOC_S_AUDOUT</td></tr></table></div></body></html>