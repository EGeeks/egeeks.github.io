<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ioctl MEDIA_IOC_SETUP_LINK</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="LINUX MEDIA INFRASTRUCTURE API" /><link rel="up" href="media-user-func.html" title="Appendix F. Function Reference" /><link rel="prev" href="media-ioc-enum-links.html" title="ioctl MEDIA_IOC_ENUM_LINKS" /><link rel="next" href="fdl.html" title="Appendix G. GNU Free Documentation License" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ioctl MEDIA_IOC_SETUP_LINK</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="media-ioc-enum-links.html">Prev</a> </td><th width="60%" align="center">Appendix F. Function Reference</th><td width="20%" align="right"> <a accesskey="n" href="fdl.html">Next</a></td></tr></table><hr /></div><div class="refentry"><a id="media-ioc-setup-link"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>MEDIA_IOC_SETUP_LINK — Modify the properties of a link</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <strong class="fsfunc">ioctl</strong>(</code></td><td>int <var class="pdparam">fd</var>, </td></tr><tr><td> </td><td>int <var class="pdparam">request</var>, </td></tr><tr><td> </td><td>struct media_link_desc *<var class="pdparam">argp</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a id="idp69654076"></a><h2>Arguments</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>fd</code></em></span></dt><dd><p>File descriptor returned by
	  <a class="link" href="media-func-open.html" title="media open()"><code class="function">open()</code></a>.</p></dd><dt><span class="term"><em class="parameter"><code>request</code></em></span></dt><dd><p>MEDIA_IOC_SETUP_LINK</p></dd><dt><span class="term"><em class="parameter"><code>argp</code></em></span></dt><dd><p></p></dd></dl></div></div><div class="refsect1"><a id="idp69658252"></a><h2>Description</h2><p>To change link properties applications fill a struct <a class="link" href="media-ioc-enum-links.html#media-link-desc" title="Table F.8. struct media_links_desc">media_link_desc</a> with
    link identification information (source and sink pad) and the new requested
    link flags. They then call the MEDIA_IOC_SETUP_LINK ioctl with a pointer to
    that structure.</p><p>The only configurable property is the <code class="constant">ENABLED</code>
    link flag to enable/disable a link. Links marked with the
    <code class="constant">IMMUTABLE</code> link flag can not be enabled or disabled.
    </p><p>Link configuration has no side effect on other links. If an enabled
    link at the sink pad prevents the link from being enabled, the driver
    returns with an <span class="errorcode">EBUSY</span> error code.</p><p>Only links marked with the <code class="constant">DYNAMIC</code> link flag can
    be enabled/disabled while streaming media data. Attempting to enable or
    disable a streaming non-dynamic link will return an <span class="errorcode">EBUSY</span> error code.</p><p>If the specified link can't be found the driver returns with an
    <span class="errorcode">EINVAL</span> error code.</p></div><div class="refsect1"><a id="idp69662556"></a><h2>Return Value</h2><p>On success <span class="returnvalue">0</span> is returned, on error <span class="returnvalue">-1</span> and the <code class="varname">errno</code> variable is set appropriately:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="errorcode">EBUSY</span></span></dt><dd><p>The link properties can't be changed because the link is
	  currently busy. This can be caused, for instance, by an active media
	  stream (audio or video) on the link. The ioctl shouldn't be retried if
	  no other action is performed before to fix the problem.</p></dd><dt><span class="term"><span class="errorcode">EINVAL</span></span></dt><dd><p>The struct <a class="link" href="media-ioc-enum-links.html#media-link-desc" title="Table F.8. struct media_links_desc">media_link_desc</a> references a non-existing link, or the
	  link is immutable and an attempt to modify its configuration was made.
	  </p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="media-ioc-enum-links.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="media-user-func.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="fdl.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ioctl MEDIA_IOC_ENUM_LINKS </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix G. GNU Free Documentation License</td></tr></table></div></body></html>